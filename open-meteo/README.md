# ğŸŒ¦ï¸ Open-Meteo Weather Alert (n8n Workflow)

This n8n workflow automatically checks the current weather conditions in **Cali, Colombia** using the **Open-Meteo API** and sends an **HTML email alert** when certain weather conditions are met.  
The email content is dynamically generated using **Google Gemini**.

---

## ğŸ§  What This Workflow Does

1. Runs automatically at a scheduled time.
2. Fetches real-time weather data from Open-Meteo.
3. Evaluates the weather condition code.
4. If the condition indicates possible rain or unstable weather:
    - Formats the weather data.
    - Uses an AI model to generate a simple HTML weather summary.
    - Sends the result via Gmail.

---

## â° Schedule

- **Trigger time:** Every day at **18:40**
- **Timezone:** Defined by the n8n instance (example pin data shows UTC-05:00)

---

## ğŸ”— Workflow Nodes Overview

### 1. Schedule Trigger
- Triggers the workflow daily at **18:40**.

---

### 2. HTTP Request â€“ Open-Meteo API
- Endpoint: https://api.open-meteo.com/v1/forecast

### 3. IF Node â€“ Weather Condition Check
- **Condition:** current_weather.weathercode >= 2

### 4. Set Node â€“ Edit Fields

Creates a cleaner payload for downstream nodes:

- `current_weather.temperature`
- `current_weather.weathercode`
- `summary` (human-readable weather text)

---

### 5. Google Gemini (PaLM) â€“ Message a Model

- **Model:** `gemini-flash-latest`
- **Role:**
- Generates **only a simple HTML response**.
- Informs the user about the **possibility of rain**.
- **Input data:**
- Temperature
- Weather code
- Location: Cali, Colombia

> âš ï¸ The model is strictly instructed to return **HTML only**, with no extra text.

---

### 6. Gmail â€“ Send a Message

- **Recipient:** Configurable (example uses a Gmail address)
- **Subject: Cooler Conditions and Possible Rain**
- **Body:**
- HTML generated by Google Gemini
- **Authentication:**
- Gmail OAuth2 credentials required

---

## ğŸ“§ Example Email Content

The email contains a simple HTML layout explaining:

- Current temperature
- Weather condition
- Rain possibility (inferred from the weather code)

---

## ğŸ” Required Credentials

To use this workflow, you must configure:

- **Gmail OAuth2** (for sending emails)
- **Google Gemini / PaLM API** (for HTML generation)

---

## ğŸš€ How to Use

1. Import the workflow JSON into n8n.
2. Set up the required credentials.
3. Adjust:
- Schedule time (optional)
- Location coordinates (optional)
- Email recipient
4. Activate the workflow.

---

## ğŸ“ Notes

- Weather codes are interpreted logically, not probabilistically.
- The workflow is currently inactive by default.
- Designed to be lightweight and easy to extend (e.g., add SMS or Slack alerts).
